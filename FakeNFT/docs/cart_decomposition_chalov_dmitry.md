Чалов Дмитрий Максимович

Когорта: 34

Группа: 1

Эпик: Корзина

Ссылка на доску: https://github.com/users/DmitryBeton/projects/5/views/8

## Модуль 1 — Экран «Корзина» (UI, состояния, базовая логика без реальной сети)

#### Определение основных моделей объектов
   - UI-модель элемента корзины (UICartItem: id, изображение, название, рейтинг, цена) (est: 20 минут; fact: x минут)
   - Перечисление вариантов сортировки (SortOption: по цене, по рейтингу, по названию) (est: 20 минут; fact: x минут)
   - Перечисление состояний экрана (CartState: loading, content, empty, error) (est: 30 минут; fact: x минут)
   
#### Верстка
- Импорт ассетов (иконки сортировки, удаления, заглушки) (est: 30 минут; fact: x минут)
- Верстка экрана «Корзина»:
    - UITableView с ячейкой: изображение, название, рейтинг, цена, кнопка удаления (est: 4 часа; fact: x часов)
    - Кнопка сортировки в навбаре (est: 30 минут; fact: x минут)
    - Нижняя панель: количество, сумма, кнопка «Оплатить» (est: 2 часа; fact: x часов)
    - Состояние пустой корзины (заглушка) (est: 1 час; fact: x часов)

#### Работа с внутренней логикой
- ViewModel экрана «Корзина» с хранением состояния и источника данных (est: 3 часа; fact: x часов)
- Подключение состояния ViewModel к ViewController (est: 3 часа; fact: x часов)
- Логика сортировки (est: 2 часа; fact: x часов)
- Логика удаления: показ экрана подтверждения (alert) с изображением, текстом, кнопками «Удалить»/«Вернуться» (est: 1 час; fact: x часов)
- Подсчет итогов (количество и сумма) и обновление нижней панели (est: 1 час; fact: x часов)
   
#### Интеграция и инфраструктура
- Протокол CartService и CartRepository (заглушки/моки) (est: 4 часа; fact: x часов)
- Включение в TabBar (est: 1 час; fact: x часов)

## Модуль 2 — Экран «Выбор валюты» и оплаты (без реальной сети/с простыми моками)

#### Определение основных моделей объектов
- UI-модель валюты (UICurrency: полное имя, сокращение, логотип) (est: 20 минут; fact: x минут)
- Перечисление состояний экрана выбора валюты (PaymentState: idle, selecting, confirming, success, error) (est: 20 минут; fact: x минут)

#### Верстка
- UICollectionView со списком валют: логотип, полное и краткое название (est: 3 часа; fact: x часов)
- Кнопка оплаты внизу экрана (активна при выбранной валюте) (est: 1 час; fact: x часов)
- Ссылка на пользовательское соглашение, открытие в WKWebView (est: 2 часа; fact: x часов)
- Экран/модалка «Успех. Оплата прошла» (est: 2 часа; fact: x часов)

#### Работа с внутренней логикой
- ViewModel экрана выбора валюты: выбор/снятие выбора, состояние кнопки оплаты (est: 2 часа; fact: x часов)
- Открытие пользовательского соглашения в WKWebView (est: 30 минут; fact: x минут)
- Интеграция навигации: переход с «Корзины» на «Выбор валюты» и обратная передача результата (est: 3 часа; fact: x часов)
- Моки PaymentService для симуляции успеха/ошибки, показ алерта «Повторить/Отмена» (est: 2 часа; fact: x часов)
- Блокировка UI и индикатор во время «оплаты» (est: 1 час; fact: x часов)

#### Интеграция и инфраструктура
- Протоколы CurrencyService/PaymentService (моки) (est: 1 час; fact: x часов)

## Модуль 3 — Сеть и полная интеграция: корзина, валюты, оплата + полировка

#### Работа с сетью
- Определение и проверка API (Postman):
    - Загрузка корзины (список NFT с id/ценой/изображением/рейтингом)
    - Удаление NFT из корзины
    - Список валют
    - Запрос оплаты (POST) (est: 3 часа; fact: x часов)
- Модели для парсинга: CartItem, Currency, PaymentRequest/Response (est: 1 час; fact: x часов)
- Реализация сервисов:
    - CartService: GET корзины, DELETE/POST для удаления (est: 4 часа; fact: x часов)
    - CurrencyService: GET валют (est: 2 часа; fact: x часов)
    - PaymentService: POST оплаты, обработка ошибок/таймаутов (est: 4 часа; fact: x часов)
- Storage: CartStorage (est: 2 часа; fact: x часов)
- Интеграция с существующим NetworkClient и NftStorage (est: 3 часа; fact: x часов)
    
#### Интеграция в приложение
- Связка ViewModel-ов с реальными сервисами, обработка состояний loading/error/empty (est: 6 часов; fact: x часов)
- Обновление индикаторов загрузки, ретраи при ошибках (алерт «Повторить/Отмена») (est: 2 часа; fact: x часов)
- Доработка удаления (серверное удаление + локальная синхронизация) (est: 2 часа; fact: x часов)
- Доработка «Оплаты» (успех/ошибка, подтверждение, возврат в корзину, обновление состояния) (est: 3 часа; fact: x часов)
    
#### Полировка и стабильность
- Обработка краевых случаев: пустые цены/валюты, невалидные изображения, отмена запросов (est: 2 часа; fact: x часов)
- Локализация строк (ru/en) (est: 2 часа; fact: x часов)
- Логи ключевых событий (est: 2 часа; fact: x часов)
